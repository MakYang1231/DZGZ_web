import{_ as at,a as lt}from"./C04SOAgQ.js";import{_ as it}from"./yU7ezJDP.js";import{d as rt,a as d,L as ct,x as P,M as ut,y as r,F as z,G as p,B as o,D as s,A as u,z as _,N as w,u as i,O as x,P as C,Q as _t,R as dt,U as pt,C as y,V as A,W as mt,X as gt,Y as ft}from"./CTCtpd9K.js";import{_ as vt}from"./t0O9P-lA.js";import{u as yt,c as ht,a as bt,b as wt,_ as xt}from"./qQA-uQ23.js";import{f as Ct}from"./clxyF2lu.js";const I=S=>(mt("data-v-d519023b"),S=S(),gt(),S),St={class:"page_main container d-flex justify-content-between"},kt={class:"div_page_left col-md-2 bg-light"},$t=I(()=>o("div",{class:"menu_title"},[o("div",null,"分類找商品")],-1)),Bt={class:"menu_item"},Nt={class:"me-3"},Dt={class:"text d-flex align-items-center"},Pt={key:0},It={class:"div_page_right col-md-9 col-12 bg-light"},Mt={class:"page_header_breadcrumb d-flex align-items-center"},Rt={class:"page_subItem d-flex align-items-center justify-content-between flex-wrap"},Tt={class:"d-flex align-items-center justify-content-start control_bar"},Lt=I(()=>o("div",{class:"control_label"},"篩選",-1)),jt={class:"control_options"},Ft={class:"page_itemBody mt-3"},Ht={class:"d-flex align-items-baseline justify-content-between flex-wrap"},Vt={class:""},zt=["src","data-src"],At={class:"title"},Et={key:0},Gt={class:"point"},Ot=I(()=>o("button",{class:"nutton d-none"},"點數兌換",-1)),E=18,qt=rt({__name:"[subCategory]",async setup(S){let k,M;const R=yt().currentRoute.value,h=R.params.category;let T=d(!1),B=d([]),N=d([]),L=d("");const j=d(null),{$MenuItemsData:G}=wt(),F=d(G);let a=d(),m=d();const f=d("complex");d(),ct(()=>{if(P(F.value).forEach((t,e)=>{t.category_url===h&&(B=P(t),j.value.textContent=B.category_name,N.value=B.sub_categories,N.value.forEach((n,g)=>{n.sub_url===R.params.subCategory&&(L.value=n.sub_name)}),T.value=!0)}),!T.value)throw console.log("Not ==="),ht({statusCode:404,statusMessage:"Page Not Found",fatal:!0});a?a=a.filter(t=>t.sub_category===L.value):console.log("No data"),m.value=a,m.value=v(m.value)});const{data:O,refresh:Zt}=([k,M]=ut(()=>bt(`https://isnmk.com/api/${h}`,"$yF3ZZRwgqw")),k=await k,M(),k);a=P(O.value);const b=t=>{f.value=t},q=(t,e)=>{let n=t.last_30days_sales*t.point,g=e.last_30days_sales*e.point;return n=n<=0?t.point:n,g=g<=0?e.point:g,g-n},Z=(t,e)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime(),Q=(t,e)=>(t.point===""&&(t.last_30days_sales="0"),e.point===""&&(e.last_30days_sales="0"),e.last_30days_sales-t.last_30days_sales),U=(t,e)=>(t.point===""&&(t.point="99999"),e.point===""&&(e.point="99999"),e.point-t.point),W=(t,e)=>(t.point===""&&(t.point="99999"),e.point===""&&(e.point="99999"),t.point-e.point),v=t=>{const e=[];for(let n=0;n<t.length;n+=E)e.push(t.slice(n,n+E));return e},H=()=>{a.sort(q),m.value=v(a)},X=()=>{a.sort(Z),m.value=v(a)},Y=()=>{a.sort(Q),m.value=v(a)},J=()=>{a.sort(U),m.value=v(a)},K=()=>{a.sort(W),m.value=v(a)};H();const tt=(t,e)=>'<span class="'+e+'">'+(t+1)+"</span>",et=()=>{window.scrollTo(0,0)};return(t,e)=>{const n=at,g=lt,D=it,ot=ft,st=pt,nt=vt;return r(),z(nt,{name:"default"},{default:p(()=>[o("div",St,[o("div",kt,[$t,s(),o("div",Bt,[o("ul",Nt,[u(g,null,{default:p(()=>[(r(!0),_(x,null,w(i(F),(l,$)=>(r(),_("li",{key:$,class:"mx-3"},[u(n,{class:"d-flex align-items-center position-relative pb-2",to:`/${l.category_url}`},{default:p(()=>[o("div",Dt,y(l.category_name),1)]),_:2},1032,["to"]),s(),l.sub_categories?(r(),_("div",Pt,[(r(!0),_(x,null,w(l.sub_categories,(c,V)=>(r(),_("div",{key:V,class:"page_Cat_Sub"},[u(n,{to:`/${l.category_url}/${c.sub_url}`},{default:p(()=>[s(y(c.sub_name),1)]),_:2},1032,["to"])]))),128))])):A("",!0)]))),128))]),_:1})])])]),s(),o("div",It,[o("div",Mt,[u(D,{name:"house-door-fill",class:"icon"}),s(),u(D,{name:"chevron-double-right",class:"icon mx-2"}),s(),u(n,{to:{path:`/${i(h)}`,hash:""}},{default:p(()=>[o("div",{ref_key:"DOM_ch_category",ref:j},null,512)]),_:1},8,["to"])]),s(),o("div",Rt,[(r(!0),_(x,null,w(i(N),(l,$)=>(r(),_("div",{class:"subItem_text bg-light col-12 col-md-3",key:$},[u(n,{to:`/${i(h)}/${l.sub_url}`},{default:p(()=>[u(D,{class:"mobile",name:"chevron-right"}),s(" "+y(l.sub_name),1)]),_:2},1032,["to"])]))),128))]),s(),o("div",Tt,[Lt,s(),o("div",jt,[o("button",{class:C({active:i(f)==="complex"}),onClick:e[0]||(e[0]=l=>{b("complex"),H()})},"綜合",2),s(),o("button",{class:C({active:i(f)==="time"}),onClick:e[1]||(e[1]=l=>{b("time"),X()})},"最新",2),s(),o("button",{class:C({active:i(f)==="hot"}),onClick:e[2]||(e[2]=l=>{b("hot"),Y()})},"熱門",2),s(),o("button",{class:C({active:i(f)==="point_height"}),onClick:e[3]||(e[3]=l=>{b("point_height"),J()})},"價高",2),s(),o("button",{class:C({active:i(f)==="point_low"}),onClick:e[4]||(e[4]=l=>{b("point_low"),K()})},"價低",2)])]),s(),o("div",Ft,[u(g,null,{default:p(()=>[o("ul",Ht,[u(st,{speed:0,autoHeight:!0,modules:["SwiperGrid"in t?t.SwiperGrid:i(_t),"SwiperPagination"in t?t.SwiperPagination:i(dt)],"slides-per-view":1,"slides-per-group":1,"space-between":50,loop:!1,pagination:{clickable:!0,type:"bullets",renderBullet:tt},onPaginationRender:et},{default:p(()=>[(r(!0),_(x,null,w(i(m),(l,$)=>(r(),z(ot,{class:"d-flex align-items-baseline justify-content-between flex-wrap"},{default:p(()=>[(r(!0),_(x,null,w(l,(c,V)=>(r(),_("li",Vt,[u(n,{class:"disabled-links",to:{name:"items-id",params:{id:c.item_code},query:{category:i(h),itemCode:c.item_code}}},{default:p(()=>[o("img",{class:"lazyload",itemprop:"image",src:`${c.picture_url}`,"data-src":`${c.picture_url}`},null,8,zt)]),_:2},1032,["to"]),s(),o("div",At,[s(y(c.item_name)+" ",1),c.spec!==""&&c.spec!=="無"?(r(),_("span",Et," : "+y(c.spec),1)):A("",!0)]),s(),o("div",Gt,y(("formatNumber"in t?t.formatNumber:i(Ct))(c.point))+` 菓子點
                                `,1),s(),Ot]))),256))]),_:2},1024))),256))]),_:1},8,["modules","pagination"])])]),_:1})])])])]),_:1})}}}),Kt=xt(qt,[["__scopeId","data-v-d519023b"]]);export{Kt as default};
