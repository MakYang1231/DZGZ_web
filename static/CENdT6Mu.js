import{_ as et,a as st}from"./-3cdgLZ7.js";import{_ as ot}from"./CK1pkfGn.js";import{d as nt,a as p,M as at,x as N,N as it,z as l,A as u,D as s,F as o,B as _,C as m,u as i,O as w,P as x,Q as C,E as h,R as V,U as lt,V as rt,H as ct,W as ut,X as _t,Y as dt,Z as pt}from"./B-EAanoX.js";import{u as mt,c as gt,a as ft,b as vt,_ as ht}from"./RTpS-rPs.js";import{f as yt}from"./clxyF2lu.js";const P=S=>(ut("data-v-873de6ab"),S=S(),_t(),S),bt={class:"page_main container d-flex justify-content-between"},wt={class:"div_page_left col-md-2 bg-light"},xt=P(()=>s("div",{class:"menu_title"},[s("div",null,"分類找商品")],-1)),Ct={class:"menu_item"},St={class:"me-3"},kt={class:"text d-flex align-items-center"},$t={key:0},Bt={class:"div_page_right col-md-9 col-12 bg-light"},Dt={class:"page_header_breadcrumb d-flex align-items-center"},Nt={class:"page_subItem d-flex align-items-center justify-content-between flex-wrap"},Pt={class:"d-flex align-items-center justify-content-start control_bar"},It=P(()=>s("div",{class:"control_label"},"篩選",-1)),Mt={class:"control_options"},Ht={class:"page_itemBody mt-3"},Rt={class:"d-flex align-items-baseline justify-content-between flex-wrap"},Tt={class:""},jt=["src","data-src"],Ft={class:"title"},Vt={key:0},zt={class:"point"},At=P(()=>s("button",{class:"nutton d-none"},"點數兌換",-1)),z=18,Et=nt({__name:"index",async setup(S){let k,I;const y=mt().currentRoute.value.params.category;let M=p(!1),B=p([]),H=p([]);const R=p(null),{$MenuItemsData:A}=vt(),T=p(A);let r=p(),d=p();const f=p("complex");p(),at(()=>{if(N(T.value).forEach((t,e)=>{t.category_url===y&&(B=N(t),R.value.textContent=B.category_name,H.value=B.sub_categories,M.value=!0)}),!M.value)throw console.log("Not ==="),gt({statusCode:404,statusMessage:"Page Not Found",fatal:!0})});const{data:E,refresh:Ot}=([k,I]=it(()=>ft(`https://isnmk.com/api/${y}`,"$lUdZf5FrkZ")),k=await k,I(),k);r=N(E.value),d.value=r;const b=t=>{f.value=t},L=(t,e)=>{let n=t.last_30days_sales*t.point,g=e.last_30days_sales*e.point;return n=n<=0?t.point:n,g=g<=0?e.point:g,g-n},O=(t,e)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime(),G=(t,e)=>(t.point===""&&(t.last_30days_sales="0"),e.point===""&&(e.last_30days_sales="0"),e.last_30days_sales-t.last_30days_sales),Z=(t,e)=>(t.point===""&&(t.point="99999"),e.point===""&&(e.point="99999"),e.point-t.point),U=(t,e)=>(t.point===""&&(t.point="99999"),e.point===""&&(e.point="99999"),t.point-e.point),v=t=>{const e=[];for(let n=0;n<t.length;n+=z)e.push(t.slice(n,n+z));return e};d.value=v(d.value);const j=()=>{r.sort(L),d.value=v(r)},q=()=>{r.sort(O),d.value=v(r)},Q=()=>{r.sort(G),d.value=v(r)},W=()=>{r.sort(Z),d.value=v(r)},X=()=>{r.sort(U),d.value=v(r)};j();const Y=(t,e)=>'<span class="'+e+'">'+(t+1)+"</span>",J=()=>{window.scrollTo(0,0)};return(t,e)=>{const n=et,g=st,D=ot,K=dt,tt=pt;return l(),u("div",bt,[s("div",wt,[xt,o(),s("div",Ct,[s("ul",St,[_(g,null,{default:m(()=>[(l(!0),u(w,null,x(i(T),(a,$)=>(l(),u("li",{key:$,class:"mx-3"},[_(n,{class:"d-flex align-items-center position-relative pb-2",to:`/${a.category_url}`},{default:m(()=>[s("div",kt,h(a.category_name),1)]),_:2},1032,["to"]),o(),a.sub_categories?(l(),u("div",$t,[(l(!0),u(w,null,x(a.sub_categories,(c,F)=>(l(),u("div",{key:F,class:"page_Cat_Sub"},[_(n,{to:`/${a.category_url}/${c.sub_url}`},{default:m(()=>[o(h(c.sub_name),1)]),_:2},1032,["to"])]))),128))])):V("",!0)]))),128))]),_:1})])])]),o(),s("div",Bt,[s("div",Dt,[_(D,{name:"house-door-fill",class:"icon"}),o(),_(D,{name:"chevron-double-right",class:"icon mx-2"}),o(),_(n,{to:{path:`/${i(y)}`,hash:""}},{default:m(()=>[s("div",{ref_key:"DOM_ch_category",ref:R},null,512)]),_:1},8,["to"])]),o(),s("div",Nt,[(l(!0),u(w,null,x(i(H),(a,$)=>(l(),u("div",{class:"subItem_text bg-light col-12 col-md-3",key:$},[_(n,{to:`/${i(y)}/${a.sub_url}`},{default:m(()=>[_(D,{class:"mobile",name:"chevron-right"}),o(" "+h(a.sub_name),1)]),_:2},1032,["to"])]))),128))]),o(),s("div",Pt,[It,o(),s("div",Mt,[s("button",{class:C({active:i(f)==="complex"}),onClick:e[0]||(e[0]=a=>{b("complex"),j()})},"綜合",2),o(),s("button",{class:C({active:i(f)==="time"}),onClick:e[1]||(e[1]=a=>{b("time"),q()})},"最新",2),o(),s("button",{class:C({active:i(f)==="hot"}),onClick:e[2]||(e[2]=a=>{b("hot"),Q()})},"熱門",2),o(),s("button",{class:C({active:i(f)==="point_height"}),onClick:e[3]||(e[3]=a=>{b("point_height"),W()})},"價高",2),o(),s("button",{class:C({active:i(f)==="point_low"}),onClick:e[4]||(e[4]=a=>{b("point_low"),X()})},"價低",2)])]),o(),s("div",Ht,[_(g,null,{default:m(()=>[s("ul",Rt,[_(tt,{speed:0,autoHeight:!0,modules:["SwiperGrid"in t?t.SwiperGrid:i(lt),"SwiperPagination"in t?t.SwiperPagination:i(rt)],"slides-per-view":1,"slides-per-group":1,"space-between":50,loop:!1,pagination:{clickable:!0,type:"bullets",renderBullet:Y},onPaginationRender:J},{default:m(()=>[(l(!0),u(w,null,x(i(d),(a,$)=>(l(),ct(K,{class:"d-flex align-items-baseline justify-content-between flex-wrap"},{default:m(()=>[(l(!0),u(w,null,x(a,(c,F)=>(l(),u("li",Tt,[_(n,{class:"disabled-links",to:{name:"items-id",params:{id:c.item_code},query:{category:i(y),itemCode:c.item_code}}},{default:m(()=>[s("img",{class:"lazyload",itemprop:"image",src:`${c.picture_url}`,"data-src":`${c.picture_url}`},null,8,jt)]),_:2},1032,["to"]),o(),s("div",Ft,[o(h(c.item_name)+" ",1),c.spec!==""&&c.spec!=="無"?(l(),u("span",Vt," : "+h(c.spec),1)):V("",!0)]),o(),s("div",zt,h(("formatNumber"in t?t.formatNumber:i(yt))(c.point))+` 菓子點
                                `,1),o(),At]))),256))]),_:2},1024))),256))]),_:1},8,["modules","pagination"])])]),_:1})])])])}}}),Wt=ht(Et,[["__scopeId","data-v-873de6ab"]]);export{Wt as default};
