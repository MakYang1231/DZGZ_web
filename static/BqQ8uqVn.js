import{_ as st,a as ot}from"./BmWKsJel.js";import{_ as nt,a as at}from"./CrjZJEAY.js";import{d as it,a as p,M as lt,x as N,N as rt,z as l,A as _,D as s,F as o,B as u,C as m,u as i,O as x,P as w,Q as C,E as h,R as V,U as ct,V as _t,H as ut,W as dt,X as pt,Y as mt,Z as gt}from"./Dpei8Fnb.js";import{u as ft,c as vt,a as ht,b as yt,_ as bt}from"./DlL0Cun7.js";import{f as xt}from"./clxyF2lu.js";const P=S=>(dt("data-v-53bc6636"),S=S(),pt(),S),wt={class:"page_main container d-flex justify-content-between"},Ct={class:"div_page_left col-md-2 bg-light"},St=P(()=>s("div",{class:"menu_title"},[s("div",null,"分類找商品")],-1)),kt={class:"menu_item"},$t={class:"me-3"},Bt={class:"text d-flex align-items-center"},Dt={key:0},Nt={class:"div_page_right col-md-9 col-12 bg-light"},Pt={class:"page_header_breadcrumb d-flex align-items-center"},It={class:"page_subItem d-flex align-items-center justify-content-between flex-wrap"},Mt={class:"d-flex align-items-center justify-content-start control_bar"},Ht=P(()=>s("div",{class:"control_label"},"篩選",-1)),Rt={class:"control_options"},Tt={class:"page_itemBody mt-3"},jt={class:"d-flex align-items-baseline justify-content-between flex-wrap"},Ft={class:""},Vt={class:"title"},zt={key:0},At={class:"point"},Et=P(()=>s("button",{class:"nutton d-none"},"點數兌換",-1)),z=18,Lt=it({__name:"index",async setup(S){let k,I;const y=ft().currentRoute.value.params.category;let M=p(!1),B=p([]),H=p([]);const R=p(null),{$MenuItemsData:A}=yt(),T=p(A);let r=p(),d=p();const f=p("complex");p(),lt(()=>{if(N(T.value).forEach((t,e)=>{t.category_url===y&&(B=N(t),R.value.textContent=B.category_name,H.value=B.sub_categories,M.value=!0)}),!M.value)throw console.log("Not ==="),vt({statusCode:404,statusMessage:"Page Not Found",fatal:!0})});const{data:E,refresh:Gt}=([k,I]=rt(()=>ht(`https://isnmk.com/api/${y}`,"$lUdZf5FrkZ")),k=await k,I(),k);r=N(E.value),d.value=r;const b=t=>{f.value=t},L=(t,e)=>{let n=t.last_30days_sales*t.point,g=e.last_30days_sales*e.point;return n=n<=0?t.point:n,g=g<=0?e.point:g,g-n},O=(t,e)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime(),G=(t,e)=>(t.point===""&&(t.last_30days_sales="0"),e.point===""&&(e.last_30days_sales="0"),e.last_30days_sales-t.last_30days_sales),Z=(t,e)=>(t.point===""&&(t.point="99999"),e.point===""&&(e.point="99999"),e.point-t.point),U=(t,e)=>(t.point===""&&(t.point="99999"),e.point===""&&(e.point="99999"),t.point-e.point),v=t=>{const e=[];for(let n=0;n<t.length;n+=z)e.push(t.slice(n,n+z));return e};d.value=v(d.value);const j=()=>{r.sort(L),d.value=v(r)},q=()=>{r.sort(O),d.value=v(r)},Q=()=>{r.sort(G),d.value=v(r)},W=()=>{r.sort(Z),d.value=v(r)},X=()=>{r.sort(U),d.value=v(r)};j();const Y=(t,e)=>'<span class="'+e+'">'+(t+1)+"</span>",J=()=>{window.scrollTo(0,0)};return(t,e)=>{const n=st,g=ot,D=nt,K=at,tt=mt,et=gt;return l(),_("div",wt,[s("div",Ct,[St,o(),s("div",kt,[s("ul",$t,[u(g,null,{default:m(()=>[(l(!0),_(x,null,w(i(T),(a,$)=>(l(),_("li",{key:$,class:"mx-3"},[u(n,{class:"d-flex align-items-center position-relative pb-2",to:`/${a.category_url}`},{default:m(()=>[s("div",Bt,h(a.category_name),1)]),_:2},1032,["to"]),o(),a.sub_categories?(l(),_("div",Dt,[(l(!0),_(x,null,w(a.sub_categories,(c,F)=>(l(),_("div",{key:F,class:"page_Cat_Sub"},[u(n,{to:`/${a.category_url}/${c.sub_url}`},{default:m(()=>[o(h(c.sub_name),1)]),_:2},1032,["to"])]))),128))])):V("",!0)]))),128))]),_:1})])])]),o(),s("div",Nt,[s("div",Pt,[u(D,{name:"house-door-fill",class:"icon"}),o(),u(D,{name:"chevron-double-right",class:"icon mx-2"}),o(),u(n,{to:{path:`/${i(y)}`,hash:""}},{default:m(()=>[s("div",{ref_key:"DOM_ch_category",ref:R},null,512)]),_:1},8,["to"])]),o(),s("div",It,[(l(!0),_(x,null,w(i(H),(a,$)=>(l(),_("div",{class:"subItem_text bg-light col-12 col-md-3",key:$},[u(n,{to:`/${i(y)}/${a.sub_url}`},{default:m(()=>[u(D,{class:"mobile",name:"chevron-right"}),o(" "+h(a.sub_name),1)]),_:2},1032,["to"])]))),128))]),o(),s("div",Mt,[Ht,o(),s("div",Rt,[s("button",{class:C({active:i(f)==="complex"}),onClick:e[0]||(e[0]=a=>{b("complex"),j()})},"綜合",2),o(),s("button",{class:C({active:i(f)==="time"}),onClick:e[1]||(e[1]=a=>{b("time"),q()})},"最新",2),o(),s("button",{class:C({active:i(f)==="hot"}),onClick:e[2]||(e[2]=a=>{b("hot"),Q()})},"熱門",2),o(),s("button",{class:C({active:i(f)==="point_height"}),onClick:e[3]||(e[3]=a=>{b("point_height"),W()})},"價高",2),o(),s("button",{class:C({active:i(f)==="point_low"}),onClick:e[4]||(e[4]=a=>{b("point_low"),X()})},"價低",2)])]),o(),s("div",Tt,[u(g,null,{default:m(()=>[s("ul",jt,[u(et,{speed:0,autoHeight:!0,modules:["SwiperGrid"in t?t.SwiperGrid:i(ct),"SwiperPagination"in t?t.SwiperPagination:i(_t)],"slides-per-view":1,"slides-per-group":1,"space-between":50,loop:!1,pagination:{clickable:!0,type:"bullets",renderBullet:Y},onPaginationRender:J},{default:m(()=>[(l(!0),_(x,null,w(i(d),(a,$)=>(l(),ut(tt,{class:"d-flex align-items-baseline justify-content-between flex-wrap"},{default:m(()=>[(l(!0),_(x,null,w(a,(c,F)=>(l(),_("li",Ft,[u(n,{class:"disabled-links",to:{name:"items-id",params:{id:c.item_code},query:{category:i(y),itemCode:c.item_code}}},{default:m(()=>[u(K,{class:"lazyload",itemprop:"image",src:`${c.picture_url}`,"data-src":`${c.picture_url}`},null,8,["src","data-src"])]),_:2},1032,["to"]),o(),s("div",Vt,[o(h(c.item_name)+" ",1),c.spec!==""&&c.spec!=="無"?(l(),_("span",zt," : "+h(c.spec),1)):V("",!0)]),o(),s("div",At,h(("formatNumber"in t?t.formatNumber:i(xt))(c.point))+` 菓子點
                                `,1),o(),Et]))),256))]),_:2},1024))),256))]),_:1},8,["modules","pagination"])])]),_:1})])])])}}}),Xt=bt(Lt,[["__scopeId","data-v-53bc6636"]]);export{Xt as default};
