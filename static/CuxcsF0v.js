import{_ as st,a as nt}from"./BeKK30o1.js";import{_ as at}from"./ClgYKEXt.js";import{d as it,a as m,L as lt,x as N,M as rt,y as l,F as H,G as d,B as o,D as s,A as _,z as u,N as b,u as i,O as w,P as C,Q as ct,C as h,R as V,U as _t,V as ut,W as dt,X as pt,Y as mt}from"./CHuaOox2.js";import{_ as ft}from"./DVTTvwnD.js";import{u as gt,c as vt,a as ht,b as yt,_ as xt}from"./D2o6poHg.js";import{f as bt}from"./clxyF2lu.js";const P=S=>(dt("data-v-f7ada9f9"),S=S(),pt(),S),wt={class:"page_main container d-flex justify-content-between"},Ct={class:"div_page_left col-md-2 bg-light"},St=P(()=>o("div",{class:"menu_title"},[o("div",null,"分類找商品")],-1)),kt={class:"menu_item"},$t={class:"me-3"},Bt={class:"text d-flex align-items-center"},Dt={key:0},Nt={class:"div_page_right col-md-9 col-12 bg-light"},Pt={class:"page_header_breadcrumb d-flex align-items-center"},It={class:"page_subItem d-flex align-items-center justify-content-between flex-wrap"},Mt={class:"d-flex align-items-center justify-content-start control_bar"},Lt=P(()=>o("div",{class:"control_label"},"篩選",-1)),Rt={class:"control_options"},Tt={class:"page_itemBody mt-3"},jt={class:"d-flex align-items-baseline justify-content-between flex-wrap"},Ft={class:""},Ht=["src","data-src"],Vt={class:"title"},zt={key:0},At={class:"point"},Gt=P(()=>o("button",{class:"nutton d-none"},"點數兌換",-1)),z=18,Ot=it({__name:"index",async setup(S){let k,I;const y=gt().currentRoute.value.params.category;let M=m(!1),B=m([]),L=m([]);const R=m(null),{$MenuItemsData:A}=yt(),T=m(A);let r=m(),p=m();const g=m("complex");m(),lt(()=>{if(N(T.value).forEach((t,e)=>{t.category_url===y&&(B=N(t),R.value.textContent=B.category_name,L.value=B.sub_categories,M.value=!0)}),!M.value)throw console.log("Not ==="),vt({statusCode:404,statusMessage:"Page Not Found",fatal:!0})});const{data:G,refresh:Ut}=([k,I]=rt(()=>ht(`https://isnmk.com/api/${y}`,"$lUdZf5FrkZ")),k=await k,I(),k);r=N(G.value),p.value=r;const x=t=>{g.value=t},O=(t,e)=>{let n=t.last_30days_sales*t.point,f=e.last_30days_sales*e.point;return n=n<=0?t.point:n,f=f<=0?e.point:f,f-n},E=(t,e)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime(),U=(t,e)=>(t.point===""&&(t.last_30days_sales="0"),e.point===""&&(e.last_30days_sales="0"),e.last_30days_sales-t.last_30days_sales),Z=(t,e)=>(t.point===""&&(t.point="99999"),e.point===""&&(e.point="99999"),e.point-t.point),q=(t,e)=>(t.point===""&&(t.point="99999"),e.point===""&&(e.point="99999"),t.point-e.point),v=t=>{const e=[];for(let n=0;n<t.length;n+=z)e.push(t.slice(n,n+z));return e};p.value=v(p.value);const j=()=>{r.sort(O),p.value=v(r)},Q=()=>{r.sort(E),p.value=v(r)},W=()=>{r.sort(U),p.value=v(r)},X=()=>{r.sort(Z),p.value=v(r)},Y=()=>{r.sort(q),p.value=v(r)};j();const J=(t,e)=>'<span class="'+e+'">'+(t+1)+"</span>",K=()=>{window.scrollTo(0,0)};return(t,e)=>{const n=st,f=nt,D=at,tt=mt,et=ct,ot=ft;return l(),H(ot,{name:"default"},{default:d(()=>[o("div",wt,[o("div",Ct,[St,s(),o("div",kt,[o("ul",$t,[_(f,null,{default:d(()=>[(l(!0),u(w,null,b(i(T),(a,$)=>(l(),u("li",{key:$,class:"mx-3"},[_(n,{class:"d-flex align-items-center position-relative pb-2",to:`/${a.category_url}`},{default:d(()=>[o("div",Bt,h(a.category_name),1)]),_:2},1032,["to"]),s(),a.sub_categories?(l(),u("div",Dt,[(l(!0),u(w,null,b(a.sub_categories,(c,F)=>(l(),u("div",{key:F,class:"page_Cat_Sub"},[_(n,{to:`/${a.category_url}/${c.sub_url}`},{default:d(()=>[s(h(c.sub_name),1)]),_:2},1032,["to"])]))),128))])):V("",!0)]))),128))]),_:1})])])]),s(),o("div",Nt,[o("div",Pt,[_(D,{name:"house-door-fill",class:"icon"}),s(),_(D,{name:"chevron-double-right",class:"icon mx-2"}),s(),_(n,{to:{path:`/${i(y)}`,hash:""}},{default:d(()=>[o("div",{ref_key:"DOM_ch_category",ref:R},null,512)]),_:1},8,["to"])]),s(),o("div",It,[(l(!0),u(w,null,b(i(L),(a,$)=>(l(),u("div",{class:"subItem_text bg-light col-12 col-md-3",key:$},[_(n,{to:`/${i(y)}/${a.sub_url}`},{default:d(()=>[_(D,{class:"mobile",name:"chevron-right"}),s(" "+h(a.sub_name),1)]),_:2},1032,["to"])]))),128))]),s(),o("div",Mt,[Lt,s(),o("div",Rt,[o("button",{class:C({active:i(g)==="complex"}),onClick:e[0]||(e[0]=a=>{x("complex"),j()})},"綜合",2),s(),o("button",{class:C({active:i(g)==="time"}),onClick:e[1]||(e[1]=a=>{x("time"),Q()})},"最新",2),s(),o("button",{class:C({active:i(g)==="hot"}),onClick:e[2]||(e[2]=a=>{x("hot"),W()})},"熱門",2),s(),o("button",{class:C({active:i(g)==="point_height"}),onClick:e[3]||(e[3]=a=>{x("point_height"),X()})},"價高",2),s(),o("button",{class:C({active:i(g)==="point_low"}),onClick:e[4]||(e[4]=a=>{x("point_low"),Y()})},"價低",2)])]),s(),o("div",Tt,[_(f,null,{default:d(()=>[o("ul",jt,[_(et,{speed:0,autoHeight:!0,modules:["SwiperGrid"in t?t.SwiperGrid:i(_t),"SwiperPagination"in t?t.SwiperPagination:i(ut)],"slides-per-view":1,"slides-per-group":1,"space-between":50,loop:!1,pagination:{clickable:!0,type:"bullets",renderBullet:J},onPaginationRender:K},{default:d(()=>[(l(!0),u(w,null,b(i(p),(a,$)=>(l(),H(tt,{class:"d-flex align-items-baseline justify-content-between flex-wrap"},{default:d(()=>[(l(!0),u(w,null,b(a,(c,F)=>(l(),u("li",Ft,[_(n,{class:"disabled-links",to:{name:"items-id",params:{id:c.item_code},query:{category:i(y),itemCode:c.item_code}}},{default:d(()=>[o("img",{class:"lazyload",itemprop:"image",src:`${c.picture_url}`,"data-src":`${c.picture_url}`},null,8,Ht)]),_:2},1032,["to"]),s(),o("div",Vt,[s(h(c.item_name)+" ",1),c.spec!==""&&c.spec!=="無"?(l(),u("span",zt," : "+h(c.spec),1)):V("",!0)]),s(),o("div",At,h(("formatNumber"in t?t.formatNumber:i(bt))(c.point))+` 菓子點
                                `,1),s(),Gt]))),256))]),_:2},1024))),256))]),_:1},8,["modules","pagination"])])]),_:1})])])])]),_:1})}}}),Jt=xt(Ot,[["__scopeId","data-v-f7ada9f9"]]);export{Jt as default};
