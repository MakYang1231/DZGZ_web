import{_ as J,a as K,b as Q,c as W}from"./DKrRJbeZ.js";import{d as X,u as Y,r as u,o as tt,t as C,c as et,w as ot,a,b as l,e as o,f as n,g as _,h as p,i,F as k,j as w,n as v,p as st,k as nt,l as g,m as T}from"./CBv5oDi2.js";import{f as at}from"./clxyF2lu.js";const lt={class:"page_main container d-flex justify-content-between"},it={class:"div_page_left col-md-2 bg-light"},rt=o("div",{class:"menu_title"},[o("div",null,"分類找商品")],-1),ct={class:"menu_item"},_t={class:"me-3"},ut={class:"text d-flex align-items-center"},dt={key:0},pt={class:"div_page_right col-md-9 col-12 bg-light"},mt={class:"page_header_breadcrumb d-flex align-items-center"},gt={class:"page_subItem d-flex align-items-center justify-content-between flex-wrap"},ft={class:"d-flex align-items-center justify-content-start control_bar"},vt=o("div",{class:"control_label"},"篩選",-1),ht={class:"control_options"},yt={class:"page_itemBody mt-3"},xt={class:"d-flex align-items-baseline justify-content-between flex-wrap"},bt={class:""},Ct={class:"title"},kt={key:0},wt={class:"point"},$t=o("button",{class:"nutton d-none"},"點數兌換",-1),Ft=X({__name:"index",async setup(Bt){let h,B;const y=Y().currentRoute.value.params.category;let N=u(!1),x=u([]),D=u([]);const S=u(null),{$MenuItemsData:M}=st();console.log(M);const $=u(M);let r=u(),j=u([]);const m=u("");u(),tt(()=>{if(console.log(C($.value)),C($.value).forEach((e,t)=>{e.category_url===y&&(x=C(e),console.log(x),S.value.textContent=x.category_name,D.value=x.sub_categories,N.value=!0)}),!N.value)throw console.log("Not ==="),et({statusCode:404,statusMessage:"Page Not Found",fatal:!0})});const{data:H,refresh:Dt}=([h,B]=ot(()=>nt(`https://isnmk.com/api/${y}`,"$lUdZf5FrkZ")),h=await h,B(),h);r=C(H.value);const f=e=>{m.value=e},I=(e,t)=>{let c=e.last_30days_sales*e.point,d=t.last_30days_sales*t.point;return c=c<=0?e.point:c,d=d<=0?t.point:d,d-c},L=(e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime(),V=(e,t)=>(e.point===""&&(e.last_30days_sales="0"),t.point===""&&(t.last_30days_sales="0"),t.last_30days_sales-e.last_30days_sales),A=(e,t)=>(e.point===""&&(e.point="99999"),t.point===""&&(t.point="99999"),t.point-e.point),E=(e,t)=>(e.point===""&&(e.point="99999"),t.point===""&&(t.point="99999"),e.point-t.point);for(let e in r)j.value.push(r[e]);r=j;const O=()=>{r.value.sort(I)},R=()=>{r.value.sort(L)},z=()=>{r.value.sort(V)},Z=()=>{r.value.sort(A)},U=()=>{r.value.sort(E)};return(e,t)=>{const c=J,d=K,F=Q,q=W;return a(),l("div",lt,[o("div",it,[rt,n(),o("div",ct,[o("ul",_t,[_(d,null,{default:p(()=>[(a(!0),l(k,null,w(i($),(s,b)=>(a(),l("li",{key:b,class:"mx-3"},[_(c,{class:"d-flex align-items-center position-relative pb-2",to:`/${s.category_url}`},{default:p(()=>[o("div",ut,g(s.category_name),1)]),_:2},1032,["to"]),n(),s.sub_categories?(a(),l("div",dt,[(a(!0),l(k,null,w(s.sub_categories,(P,G)=>(a(),l("div",{key:G,class:"page_Cat_Sub"},[_(c,{to:`/${s.category_url}/${P.sub_url}`},{default:p(()=>[n(g(P.sub_name),1)]),_:2},1032,["to"])]))),128))])):T("",!0)]))),128))]),_:1})])])]),n(),o("div",pt,[o("div",mt,[_(F,{name:"house-door-fill",class:"icon"}),n(),_(F,{name:"chevron-double-right",class:"icon mx-2"}),n(),_(c,{to:{path:`/${i(y)}`,hash:""}},{default:p(()=>[o("div",{ref_key:"DOM_ch_category",ref:S},null,512)]),_:1},8,["to"])]),n(),o("div",gt,[(a(!0),l(k,null,w(i(D),(s,b)=>(a(),l("div",{class:"subItem_text bg-light col-4 col-md-3",key:b},[_(c,{to:`/${i(y)}/${s.sub_url}`},{default:p(()=>[n(g(s.sub_name),1)]),_:2},1032,["to"])]))),128))]),n(),o("div",ft,[vt,n(),o("div",ht,[o("button",{class:v({active:i(m)==="complex"}),onClick:t[0]||(t[0]=s=>{f("complex"),O()})},"綜合排名",2),n(),o("button",{class:v({active:i(m)==="time"}),onClick:t[1]||(t[1]=s=>{f("time"),R()})},"最新",2),n(),o("button",{class:v({active:i(m)==="hot"}),onClick:t[2]||(t[2]=s=>{f("hot"),z()})},"最熱銷",2),n(),o("button",{class:v({active:i(m)==="point_height"}),onClick:t[3]||(t[3]=s=>{f("point_height"),Z()})},"點數高",2),n(),o("button",{class:v({active:i(m)==="point_low"}),onClick:t[4]||(t[4]=s=>{f("point_low"),U()})},"點數低",2)])]),n(),o("div",yt,[_(d,null,{default:p(()=>[o("ul",xt,[(a(!0),l(k,null,w(i(r),(s,b)=>(a(),l("li",bt,[_(c,{class:"disabled-link",to:{path:"/",hash:""}},{default:p(()=>[_(q,{class:"lazyload",itemprop:"image",src:`${s.picture_url}`,"data-src":`${s.picture_url}`},null,8,["src","data-src"])]),_:2},1024),n(),o("div",Ct,[n(g(s.item_name)+" ",1),s.spec!==""&&s.spec!=="無"?(a(),l("span",kt," : "+g(s.spec),1)):T("",!0)]),n(),o("div",wt,g(("formatNumber"in e?e.formatNumber:i(at))(s.point))+` 菓子點
                            `,1),n(),$t]))),256))])]),_:1})])])])}}});export{Ft as default};
