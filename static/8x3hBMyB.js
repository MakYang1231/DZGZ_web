import{_ as st,a as ot,b as nt,c as at}from"./D39r1J1r.js";import{d as lt,a as d,M as it,x as N,N as rt,z as i,A as c,D as s,F as o,B as u,C as m,u as r,O as b,P as w,Q as x,E as h,R as F,U as ct,V as ut,H as _t,W as dt,X as pt}from"./orbDqLiy.js";import{u as mt,c as gt,a as ft,b as vt}from"./BCzGIEXV.js";import{f as ht}from"./clxyF2lu.js";const yt={class:"page_main container d-flex justify-content-between"},bt={class:"div_page_left col-md-2 bg-light"},wt=s("div",{class:"menu_title"},[s("div",null,"分類找商品")],-1),xt={class:"menu_item"},Ct={class:"me-3"},St={class:"text d-flex align-items-center"},kt={key:0},$t={class:"div_page_right col-md-9 col-12 bg-light"},Bt={class:"page_header_breadcrumb d-flex align-items-center"},Nt={class:"page_subItem d-flex align-items-center justify-content-between flex-wrap"},Dt={class:"d-flex align-items-center justify-content-start control_bar"},Pt=s("div",{class:"control_label"},"篩選",-1),Mt={class:"control_options"},Rt={class:"page_itemBody mt-3"},Tt={class:"d-flex align-items-baseline justify-content-between flex-wrap"},Ht={class:""},jt={class:"title"},Et={key:0},Ft={class:"point"},Vt=s("button",{class:"nutton d-none"},"點數兌換",-1),V=18,Zt=lt({__name:"[subCategory]",async setup(zt){let C,D;const P=mt().currentRoute.value,S=P.params.category;let M=d(!1),$=d([]),B=d([]),R=d("");const T=d(null),{$MenuItemsData:z}=vt(),H=d(z);let a=d(),p=d();const f=d("");d(),it(()=>{if(N(H.value).forEach((t,e)=>{t.category_url===S&&($=N(t),T.value.textContent=$.category_name,B.value=$.sub_categories,B.value.forEach((n,g)=>{n.sub_url===P.params.subCategory&&(R.value=n.sub_name)}),M.value=!0)}),!M.value)throw console.log("Not ==="),gt({statusCode:404,statusMessage:"Page Not Found",fatal:!0});a?a=a.filter(t=>t.sub_category===R.value):console.log("No data"),p.value=a,p.value=v(p.value)});const{data:A,refresh:At}=([C,D]=rt(()=>ft(`https://isnmk.com/api/${S}`,"$yF3ZZRwgqw")),C=await C,D(),C);a=N(A.value);const y=t=>{f.value=t},I=(t,e)=>{let n=t.last_30days_sales*t.point,g=e.last_30days_sales*e.point;return n=n<=0?t.point:n,g=g<=0?e.point:g,g-n},L=(t,e)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime(),O=(t,e)=>(t.point===""&&(t.last_30days_sales="0"),e.point===""&&(e.last_30days_sales="0"),e.last_30days_sales-t.last_30days_sales),G=(t,e)=>(t.point===""&&(t.point="99999"),e.point===""&&(e.point="99999"),e.point-t.point),Z=(t,e)=>(t.point===""&&(t.point="99999"),e.point===""&&(e.point="99999"),t.point-e.point),v=t=>{const e=[];for(let n=0;n<t.length;n+=V)e.push(t.slice(n,n+V));return e},q=()=>{a.sort(I),p.value=v(a)},Q=()=>{a.sort(L),p.value=v(a)},U=()=>{a.sort(O),p.value=v(a)},W=()=>{a.sort(G),p.value=v(a)},X=()=>{a.sort(Z),p.value=v(a)},J=(t,e)=>'<span class="'+e+'">'+(t+1)+"</span>",K=()=>{window.scrollTo(0,0)};return(t,e)=>{const n=st,g=ot,j=nt,Y=at,tt=dt,et=pt;return i(),c("div",yt,[s("div",bt,[wt,o(),s("div",xt,[s("ul",Ct,[u(g,null,{default:m(()=>[(i(!0),c(b,null,w(r(H),(l,k)=>(i(),c("li",{key:k,class:"mx-3"},[u(n,{class:"d-flex align-items-center position-relative pb-2",to:`/${l.category_url}`},{default:m(()=>[s("div",St,h(l.category_name),1)]),_:2},1032,["to"]),o(),l.sub_categories?(i(),c("div",kt,[(i(!0),c(b,null,w(l.sub_categories,(_,E)=>(i(),c("div",{key:E,class:"page_Cat_Sub"},[u(n,{to:`/${l.category_url}/${_.sub_url}`},{default:m(()=>[o(h(_.sub_name),1)]),_:2},1032,["to"])]))),128))])):F("",!0)]))),128))]),_:1})])])]),o(),s("div",$t,[s("div",Bt,[u(j,{name:"house-door-fill",class:"icon"}),o(),u(j,{name:"chevron-double-right",class:"icon mx-2"}),o(),u(n,{to:{path:`/${r(S)}`,hash:""}},{default:m(()=>[s("div",{ref_key:"DOM_ch_category",ref:T},null,512)]),_:1},8,["to"])]),o(),s("div",Nt,[(i(!0),c(b,null,w(r(B),(l,k)=>(i(),c("div",{class:"subItem_text bg-light col-4 col-md-3",key:k},[u(n,{to:`/${r(S)}/${l.sub_url}`},{default:m(()=>[o(h(l.sub_name),1)]),_:2},1032,["to"])]))),128))]),o(),s("div",Dt,[Pt,o(),s("div",Mt,[s("button",{class:x({active:r(f)==="complex"}),onClick:e[0]||(e[0]=l=>{y("complex"),q()})},"綜合排名",2),o(),s("button",{class:x({active:r(f)==="time"}),onClick:e[1]||(e[1]=l=>{y("time"),Q()})},"最新",2),o(),s("button",{class:x({active:r(f)==="hot"}),onClick:e[2]||(e[2]=l=>{y("hot"),U()})},"最熱銷",2),o(),s("button",{class:x({active:r(f)==="point_height"}),onClick:e[3]||(e[3]=l=>{y("point_height"),W()})},"點數高",2),o(),s("button",{class:x({active:r(f)==="point_low"}),onClick:e[4]||(e[4]=l=>{y("point_low"),X()})},"點數低",2)])]),o(),s("div",Rt,[u(g,null,{default:m(()=>[s("ul",Tt,[u(et,{speed:0,autoHeight:!0,modules:["SwiperGrid"in t?t.SwiperGrid:r(ct),"SwiperPagination"in t?t.SwiperPagination:r(ut)],"slides-per-view":1,"slides-per-group":1,"space-between":50,loop:!1,pagination:{clickable:!0,type:"bullets",renderBullet:J},onPaginationRender:K},{default:m(()=>[(i(!0),c(b,null,w(r(p),(l,k)=>(i(),_t(tt,{class:"d-flex align-items-baseline justify-content-between flex-wrap"},{default:m(()=>[(i(!0),c(b,null,w(l,(_,E)=>(i(),c("li",Ht,[u(n,{class:"disabled-link",to:{path:"/",hash:""}},{default:m(()=>[u(Y,{class:"lazyload",itemprop:"image",src:`${_.picture_url}`,"data-src":`${_.picture_url}`},null,8,["src","data-src"])]),_:2},1024),o(),s("div",jt,[o(h(_.item_name)+" ",1),_.spec!==""&&_.spec!=="無"?(i(),c("span",Et," : "+h(_.spec),1)):F("",!0)]),o(),s("div",Ft,h(("formatNumber"in t?t.formatNumber:r(ht))(_.point))+` 菓子點
                                `,1),o(),Vt]))),256))]),_:2},1024))),256))]),_:1},8,["modules","pagination"])])]),_:1})])])])}}});export{Zt as default};
